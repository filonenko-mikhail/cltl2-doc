<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Overlap, Inclusion, and Disjointness of Types</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2012-06-05 15:35:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
   <div id="toplinks"> &lt;<a href="../index.html">Main Page</a>&gt; &lt;<a href="symbols.html">Symbols</a>&gt; <br> &#x003C;<a 
href="scope.html" >Next</a>&#x003E;&#x003C;<a 
href="clmse16.html" >Prev</a>&#x003E;&#x003C;<a 
href="clmse16.html#tailclmse16.html" >PrevTail</a>&#x003E;&#x003C;<a 
href="#tailclmse17.html">Tail</a>&#x003E;&#x003C;<a 
href="dtypes.html#clmse17.html" >Up</a>&#x003E;</div><h3 class="sectionHead"><span class="titlemark">2.15   </span> <a 
href="clm.html#QQ2-24-46" id="x24-400002.15">Overlap, Inclusion, and
Disjointness of Types</a></h3>
<!--l. 1319--><p class="noindent" >The Common Lisp data type hierarchy is tangled and purposely left somewhat
open-ended so that implementors may experiment with new data types as
extensions to the language. This section explicitly states all the deﬁned
relationships between types, including subtype/supertype relationships,
disjointness, and exhaustive partitioning. The user of Common Lisp should not
depend on any relationships not explicitly stated here. For example, it is not valid
to assume that because a number is not complex and not rational that it must be
a <b><a 
href="symbols.html#x188-375414r414">ﬂoat</a></b>, because implementations are permitted to provide yet other kinds of
numbers.
<!--l. 1330--><p class="indent" >   First we need some terminology. If <em>x</em> is a supertype of <em>y</em>, then any object of
type <em>y</em> is also of type <em>x</em>, and <em>y</em> is said to be a subtype of <em>x</em>. If types <em>x</em> and <em>y</em> are
disjoint, then no object (in any implementation) may be both of type <em>x</em> and of
type <em>y</em>. Types <span class="math"><em>a</em><sub>1</sub></span> through <span class="math"><em>a</em><sub>n</sub></span> are an <em>exhaustive union</em> of type <em>x</em> if each <span class="math"><em>a</em><sub>j</sub></span> is a
subtype of <em>x</em>, and any object of type <em>x</em> is necessarily of at least one of the types
<span class="math"><em>a</em><sub>j</sub></span>; <span class="math"><em>a</em><sub>1</sub></span> through <span class="math"><em>a</em><sub>n</sub></span> are furthermore an <em>exhaustive partition</em> if they are also pairwise
disjoint.
      <ul class="itemize1">
      <li class="itemize">The type <b><a 
href="symbols.html#x188-375939r939">t</a></b> is a supertype of every type whatsoever. Every object is of
      type <b><a 
href="symbols.html#x188-375939r939">t</a></b>.
      </li>
      <li class="itemize">The type <b><a 
href="symbols.html#x188-375658r658">nil</a></b> is a subtype of every type whatsoever. No object is of
      type <b><a 
href="symbols.html#x188-375658r658">nil</a></b>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The types <b>cons</b>, <b>symbol</b>, <b>array</b>, <b>number</b>, <b><a 
href="symbols.html#x188-375222r222">character</a></b>, <b>hash-table</b>,
      <b>readtable</b>, <b>package</b>, <b><a 
href="symbols.html#x188-375706r706">pathname</a></b>, <b>stream</b>, <b>random-state</b>, and any
      single other type created by <b><a 
href="symbols.html#x188-375313r313">defstruct</a></b> or <b><a 
href="symbols.html#x188-375298r298">defclass</a></b> are pairwise disjoint.
                                                                          

                                                                          
      <!--l. 1360--><p class="noindent" >Type  <b><a 
href="symbols.html#x188-375434r434">function</a></b>  is  disjoint  from  the  types  <b>cons</b>,  <b>symbol</b>,  <b>array</b>,
      <b>number</b>, and <b><a 
href="symbols.html#x188-375222r222">character</a></b>.
      <!--l. 1364--><p class="noindent" >The    type    <b>compiled-function</b>   is    a    subtype    of    <b><a 
href="symbols.html#x188-375434r434">function</a></b>;
      implementations are free to deﬁne other subtypes of <b><a 
href="symbols.html#x188-375434r434">function</a></b>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The  types  <b>real</b>  and  <b><a 
href="symbols.html#x188-375256r256">complex</a></b>  are  pairwise  disjoint  subtypes  of
      <b>number</b>.</li></ul>
___________________________________________________________<div class="rationale">
<!--l. 1375--><p class="noindent" ><b>Rationale:</b> It might be thought that <b>real</b> and <b><a 
href="symbols.html#x188-375256r256">complex</a></b> should form an exhaustive
partition of the type <b>number</b>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp number system.
</div>___________________________________________________________________________________________________________
        <ul class="itemize1">
        <li class="itemize">The types <b>rational</b> and <b><a 
href="symbols.html#x188-375414r414">ﬂoat</a></b> are pairwise disjoint subtypes of <b>real</b>.</li></ul>__
<div class="rationale">
<!--l. 1390--><p class="noindent" ><b>Rationale:</b> It might be thought that <b>rational</b> and <b><a 
href="symbols.html#x188-375414r414">ﬂoat</a></b> should form an exhaustive
partition of the type <b>real</b>. This is purposely avoided here in order to permit compatible
experimentation with extensions to the Common Lisp number system.
</div>___________________________________________________________________________________________________________
        <ul class="itemize1">
        <li class="itemize">The types <b>integer</b> and <b>ratio</b> are disjoint subtypes of <b>rational</b>.</li></ul>_________
<div class="rationale">
<!--l. 1404--><p class="noindent" ><b>Rationale:</b> It might be thought that <b>integer</b> and <b>ratio</b> should form an exhaustive
partition of the type <b>rational</b>. This is purposely avoided here in order to permit
compatible experimentation with extensions to the Common Lisp rational number
system.
</div>___________________________________________________________________________________________________________
<!--l. 1412--><p class="indent" >     Types <b>ﬁxnum</b> and <b>bignum</b> do in fact form an exhaustive partition of the
type <b>integer</b>; more precisely, they voted to specify that the type <b>bignum</b> is by
deﬁnition equivalent to <b>(and integer (not ﬁxnum))</b>. This is consistent with
the ﬁrst edition text in section <a 
href="clmse3.html#x10-170002.1.1">2.1.1<!--tex4ht:ref: INTEGERS-SECTION --></a>.
                                                                          

                                                                          
<!--l. 1418--><p class="indent" >   I interpret this to mean that implementators could still experiment with such
extensions as adding explicit representations of inﬁnity, but such inﬁnities would
necessarily be of type <b>bignum</b>.
      <ul class="itemize1">
      <li class="itemize">The types <b>short-ﬂoat</b>, <b>single-ﬂoat</b>, <b>double-ﬂoat</b>, and <b>long-ﬂoat</b>
      are  subtypes  of  <b><a 
href="symbols.html#x188-375414r414">ﬂoat</a></b>.  Any  two  of  them  must  be  either  disjoint  or
      identical; if identical, then any other types between them in the above
      ordering must also be identical to them (for example, if <b>single-ﬂoat</b>
      and <b>long-ﬂoat</b> are identical types, then <b>double-ﬂoat</b> must be identical
      to them also).
      </li>
      <li class="itemize">The type <b><a 
href="symbols.html#x188-375684r684">null</a></b> is a subtype of <b>symbol</b>; the only object of type <b><a 
href="symbols.html#x188-375684r684">null</a></b> is
      <b><a 
href="symbols.html#x188-375658r658">nil</a></b>.
      </li>
      <li class="itemize">The types <b>cons</b> and <b><a 
href="symbols.html#x188-375684r684">null</a></b> form an exhaustive partition of the type <b><a 
href="symbols.html#x188-375535r535">list</a></b>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The  type  <b>standard-char</b>  is  a  subtype  of  <b>base-char</b>.  The  types
      <b>base-char</b>  and  <b>extended-char</b>  form  an  exhaustive  partition  of
      <b><a 
href="symbols.html#x188-375222r222">character</a></b>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The type <b><a 
href="symbols.html#x188-375896r896">string</a></b> is a subtype of <b><a 
href="symbols.html#x188-375990r990">vector</a></b>; it is the union of all types
      <b>(vector <em>c</em>)</b> such that <em>c</em> is a subtype of <b><a 
href="symbols.html#x188-375222r222">character</a></b>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The type <b>bit-vector</b> is a subtype of <b><a 
href="symbols.html#x188-375990r990">vector</a></b>, for <b>bit-vector</b> means
      <b>(vector bit)</b>.
      </li>
      <li class="itemize">The types <b>(vector t)</b>, <b><a 
href="symbols.html#x188-375896r896">string</a></b>, and <b>bit-vector</b> are disjoint.
                                                                          

                                                                          
      </li>
      <li class="itemize">The type <b><a 
href="symbols.html#x188-375990r990">vector</a></b> is a subtype of <b>array</b>; for all types <em>x</em>, the type <b>(vector
      <em>x</em>)</b> is the same as the type <b>(array <em>x</em> (*))</b>.
      </li>
      <li class="itemize">The type <b>simple-array</b> is a subtype of <b>array</b>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The types <b>simple-vector</b>, <b>simple-string</b>, and <b>simple-bit-vector</b> are
      disjoint subtypes of <b>simple-array</b>, for they mean <b>(simple-array t
      (*))</b>, the union of all types <b>(simple-array <em>c</em> (*))</b> such that <em>c</em> is a
      subtype of <b><a 
href="symbols.html#x188-375222r222">character</a></b>, and <b>(simple-array bit (*))</b>, respectively.</li></ul>
      <ul class="itemize1">
      <li class="itemize">The type <b>simple-vector</b> is a subtype of <b><a 
href="symbols.html#x188-375990r990">vector</a></b> and indeed is a subtype
      of <b>(vector t)</b>.
      </li>
      <li class="itemize">The type <b>simple-string</b> is a subtype of <b><a 
href="symbols.html#x188-375896r896">string</a></b>. (Note that although
      <b><a 
href="symbols.html#x188-375896r896">string</a></b> is  a  subtype  of  <b><a 
href="symbols.html#x188-375990r990">vector</a></b>,  <b>simple-string</b> is  not  a  subtype  of
      <b>simple-vector</b>.)</li></ul>
____________________________________________________<div class="rationale">
<!--l. 1490--><p class="noindent" ><b>Rationale:</b> The hypothetical name <b>simple-general-vector</b> would have been
more accurate than <b>simple-vector</b>, but in this instance euphony and user
convenience were deemed more important to the design of Common Lisp than a rigid
symmetry.
</div>___________________________________________________________________________________________________________
        <ul class="itemize1">
        <li class="itemize">The type <b>simple-bit-vector</b> is a subtype of <b>bit-vector</b>. (Note that
        although <b>bit-vector</b> is a subtype of <b><a 
href="symbols.html#x188-375990r990">vector</a></b>, <b>simple-bit-vector</b> is not
        a subtype of <b>simple-vector</b>.)
        </li>
        <li class="itemize">The types <b><a 
href="symbols.html#x188-375990r990">vector</a></b> and <b><a 
href="symbols.html#x188-375535r535">list</a></b> are disjoint subtypes of <b>sequence</b>.
                                                                          

                                                                          
      </li>
      <li class="itemize">The types <b>random-state</b>, <b>readtable</b>, <b>package</b>, <b><a 
href="symbols.html#x188-375706r706">pathname</a></b>, <b>stream</b>,
      and <b>hash-table</b> are pairwise disjoint.</li></ul>
<b>
<!--l. 1512--><p class="indent" >   random-state</b>, <b>readtable</b>, <b>package</b>, <b><a 
href="symbols.html#x188-375706r706">pathname</a></b>, <b>stream</b>, and <b>hash-table</b>
are pairwise disjoint from a number of other types as well; see note above.
      <ul class="itemize1">
      <li class="itemize">The            types            <b>two-way-stream</b>,            <b>echo-stream</b>,
      <b>broadcast-stream</b>, <b>ﬁle-stream</b>, <b>synonym-stream</b>, <b>string-stream</b>,
      and <b>concatenated-stream</b> are disjoint subtypes of <b>stream</b>.</li></ul>
      <ul class="itemize1">
      <li class="itemize">Any  two  types  created  by  <b><a 
href="symbols.html#x188-375313r313">defstruct</a></b>  are  disjoint  unless  one  is  a
      supertype of the other by virtue of the <b>:include</b> option.</li></ul>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 8--><p class="indent" >   <div id="bottomlinks">&#x003C;<a 
href="scope.html" >Next</a>&#x003E;&#x003C;<a 
href="clmse16.html" >Prev</a>&#x003E;&#x003C;<a 
href="clmse16.html#tailclmse16.html" >PrevTail</a>&#x003E;&#x003C;<a 
href="clmse17.html" >Front</a>&#x003E;&#x003C;<a 
href="dtypes.html#clmse17.html" >Up</a>&#x003E;<br>&lt;<a href="../index.html">Main Page</a>&gt; &lt;<a href="symbols.html">Symbols</a>&gt; </div><a 
 id="tailclmse17.html"></a>  
</body></html> 
